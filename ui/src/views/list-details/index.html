<div class="flex flex-wrap bg-white sm:shadow sm:p-10" *ngIf="list">
    <div class="flex mb-6 md:mb-10 flex-wrap content-start w-full" [ngClass]="{'md:w-1/3 md:px-4': standalone}">
        <div class="w-full">
            <p class="text-2xl">{{ list.name }}</p>
            <p class="text-gray-600 font-light mb-5">{{ list.recipe_count }} recipes</p>

            <div *ngIf="list.description" class="bg-gray-200 mb-5 -mx-4 md:-mx-1 px-4 py-6">{{ list.description }}</div>
            <div class="text-gray-600 text-sm">
                <a *ngIf="canEdit" routerLink="/users/{{ list.user.username }}/lists/{{ list.id }}/edit" class="btn btn-outline-primary float-right">
                    Edit
                </a>

                <a routerLink="/users/{{ list.user.username }}">
                    <img class="min-img w-10 h-10 rounded-full inline" src="https://www.gravatar.com/avatar/{{ list.user.user_hash }}.jpg?d=mp&size=64">
                </a>
                <span class="ml-3 align-top">
                by <a class="align-top h-full" routerLink="/users/{{ list.user.username }}">{{ list.user.first_name }} {{list.user.last_name}}</a>
                </span>
            </div>
        </div>
    </div>

    <div class="w-full" *ngIf="listRecipes" [ngClass]="{'md:w-2/3 md:px-8': standalone}">
        <p class="w-full mt-12 lg:mt-0 mb-3 block uppercase tracking-wide font-bold text-gray-800 text-center">Recipes</p>

        <div class="mb-8" *ngFor="let lr of listRecipes">
            <p *ngIf="canEdit" class="float-right text-gray-500 cursor-pointer px-2 py-1" (click)="removeLr(lr)">
                <fa-icon [icon]="faTimes"></fa-icon>
            </p>

            <p class="title text-xl">
                <a routerLink="/recipes/{{ lr.recipe.slug }}">{{ lr.recipe.name }}</a>
            </p>
            <div class="text-gray-600 quantities">
                <span *ngFor="let ingredient of lr.recipe.ingredients" class="mr-2 text-sm">
                    {{ ingredient }}
                </span>
            </div>
            <div class="mt-3" *ngIf="!editingLr || editingLr.id !== lr.id">
                <p *ngIf="lr.notes" class="-mx-4 px-4 py-6 bg-gray-200 text-gray-900 whitespace-pre-wrap mb-3">{{ lr.notes }}</p>
                <button *ngIf="canEdit" class="btn-sm btn-secondary"
                      (click)="editLr(lr)">
                    <span *ngIf="lr.notes">edit</span>
                    <span *ngIf="!lr.notes">add a note</span>
                </button>
            </div>
            <div class="mt-3" *ngIf="editingLr && editingLr.id === lr.id">
                <textarea class="forms mb-3"
                          [(ngModel)]="editingLr.notes" id="edit-lr"></textarea>
                <button class="btn-sm btn-secondary"
                        [disabled]="loading"
                        (click)="editingLr = null">Cancel</button>
                <button class="btn-sm btn-primary float-right"
                        [disabled]="loading"
                        (click)="saveNote(lr)">Save</button>
            </div>
        </div>
        <div *ngIf="listRecipes.length === 0">
            <p class="mt-3 text-gray-600 text-sm text-center">(No recipes here yet!)</p>
        </div>
    </div>
</div>
